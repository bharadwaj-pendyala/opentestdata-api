import os


class Config(object):
    DEBUG = False
    TESTING = False


class ProdConfig(Config):
    DB_USER = os.environ.get('DB_USER')
    DB_PASS = os.environ.get('DB_PASS')
    DB_SERVER = os.environ.get('DB_SERVER')
    DB_NAME = os.environ.get('DB_NAME')
    SQLALCHEMY_DATABASE_URI = 'mysql://%s:%s@%s/%s' % (DB_USER, DB_PASS, DB_SERVER, DB_NAME)


class DevConfig(Config):
    DEBUG = True
    SQLALCHEMY_DATABASE_URI = 'mysql://otd_user:otd_pass@localhost/otd_dev'


class TestConfig(Config):
    TESTING = True
    SQLALCHEMY_DATABASE_URI = 'mysql://otd_user:otd_pass@localhost/otd_test'


def get_config():
    # if we're in prod, the GAE_ENV var will be set
    if os.environ.get('GAE_ENV') == 'standard':
        return ProdConfig()

    # otherwise we'll be running locally and should look at FLASK_ENV
    env = os.environ.get('FLASK_ENV')
    if env == 'development':
        return DevConfig()
    elif env == 'testing':
        return TestConfig()

    raise Exception('Could not find config; did you set FLASK_ENV?')
