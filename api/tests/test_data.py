import pytest
from datetime import datetime
from ..db.models import Datum


def test_can_create_datum(client, user):
    assert len(user.data) == 0
    test_data = dict(
        name='US Address Street Number',
        type='NUM',
        mode='NEUTRAL',
        datum='1126',
    )
    resp = client.post('/data', headers=user.auth_headers, json=test_data)
    resp_data = dict(
        **test_data,
        user_id=user.id
    )
    assert resp == resp_data
    assert len(user.data) == 1
