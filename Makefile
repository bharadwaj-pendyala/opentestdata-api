dev:
	pipenv install --dev

reqs:
	pipenv run pipenv_to_requirements -f

serve:
	pipenv run flask run

deploy: reqs
	gcloud app deploy app.yaml --project ${OTD_PROJECT_ID}

migrate-init:
	pipenv run flask db init

migrate-new:
	@echo "Enter migration message: "
	@read NAME; \
	pipenv run flask db migrate --message "${NAME}"

migrate:
	pipenv run flask db upgrade

migrate-history:
	pipenv run flask db history

test:
	FLASK_ENV=testing pipenv run pytest ./api/tests/test_*.py

docs:
	og -o ./docs ./api/openapi/api.yaml markdown
